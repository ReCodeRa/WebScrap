---
title: "Python_basic"
format: html
---

# Code form "Basic Webscraper" by John Watson Rooney
[Source YouTube](https://www.youtube.com/watch?v=APukTnnwQEY&t=301s)

```{r}
library(reticulate)
py_install("bs4", method="conda" )
py_install("pandas", method="conda" )

```



```{python}
#| label: Scrape books from eshop

import requests
from bs4 import BeautifulSoup
import pandas as pd

book_list = []

for x in range (1, 3):
  print(x)
  url = f'http://books.toscrape.com/catalogue/page-{x}.html'
  r = requests.get(url)
  
  soup = BeautifulSoup(r.text, 'html.parser')
  
  article = soup.find_all('article', class_ = 'product_pod')
  
  for book in article:
    title = book.find_all('a')[1]['title']
    price = book.find('p', class_ = 'price_color').text[2:]
    instock = book.find('p', class_ = 'instock availability').text.strip()
    book = {
      'title': title,
      'price': price,
      'instock': instock
    }
    book_list.append(book)

print(len(book_list))
print(book_list[1:4])
df = pd.DataFrame(book_list)
print(df)

```
